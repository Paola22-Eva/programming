// реализация состояния "Опубликовано"
impl State for Published {
    // в состоянии "Опубликовано" запрос на рассмотрение не имеет эффекта
    fn request_review(self: Box<Self>) -> Box<dyn State> {
        self
    }

    // в состоянии "Опубликовано" одобрение не имеет эффекта
    fn approve(self: Box<Self>) -> Box<dyn State> {
        self
    }

    // в состоянии "Опубликовано" возвращаем контент публикации
    fn content<'a>(&self, post: &'a Post) -> &'a str {
        &post.content // возвращаем настоящее содержимое
    }
}

// главная функция, где создаём и манипулируем публикацией
fn main() {
    let mut post = Post::new(); // создаём новый пост

    post.add_text("Первая версия текста."); // добавляем текст
    println!("Содержимое: {}", post.content()); // показываем содержимое (оно пустое)

    post.request_review(); // переходим в состояние "На рассмотрении"
    post.approve(); // одобряем публикацию
    println!("После первого approve: {}", post.content()); // содержимое всё ещё пустое

    post.approve(); // одобряем ещё раз, теперь публикация "Опубликована"
    println!("После второго approve: {}", post.content()); // показываем содержимое, которое теперь добавлено
}
